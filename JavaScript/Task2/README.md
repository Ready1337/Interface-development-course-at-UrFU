<article class="legend">
</blockquote>
    <p>Аркадий – серьезный человек и в его телефонной книге очень много записей.
    Чтобы как можно меньше отрываться от дел, Аркадий делает голосовую систему "Василиса", которая будет заполнять телефонную книгу за него.
    К счастью, Василиса уже умеет распознавать голос и превращать его в текст, осталось научить её понимать и выполнять команды.
    Общеизвестный <strong>SQL</strong> использует английский язык, а Аркадий и Василиса говорят на русском. Так появился язык, который Аркадий назвал <strong>pbQL</strong> (Phone Book Query Language).</p>
    <p>Аркадий придумал спецификацию <strong>pbQL</strong>, а за первой реализацией обратился к вам.</p>
    <h4>Синтаксис языка <strong>pbQL</strong></h4>
    <p>Язык состоит из нескольких команд:</p>
    <h5><code>Создай контакт &lt;имя&gt;</code></h5>
    <ul>
    <li>Создает новый контакт с именем <code>&lt;имя&gt;</code> с пустыми списками телефонов и почт</li>
    <li>Принимает <code>&lt;имя&gt;</code> содержащее любые символы, кроме <code>;</code></li>
    <li>Не создает ничего, если контакт уже существует</li>
    </ul>
    <p><strong>Пример:</strong> <code>Создай контакт Григорий;</code></p>
    <h5><code>Удали контакт &lt;имя&gt;</code></h5>
    <ul>
    <li>Удаляет контакт с именем <code>&lt;имя&gt;</code></li>
    <li>Принимает <code>&lt;имя&gt;</code> содержащее любые символы, кроме <code>;</code></li>
    <li>Не удаляет ничего, если контакт не существует</li>
    </ul>
    <p><strong>Пример:</strong> <code>Удали контакт Григорий;</code></p>
    <h5><code>Добавь телефон &lt;телефон&gt; и почту &lt;почта&gt; для контакта &lt;имя&gt;</code></h5>
    <ul>
    <li>Добавляет <code>&lt;телефон&gt;</code> в спискок телефонов и <code>&lt;почту&gt;</code> в список почт для контакта <code>&lt;имя&gt;</code></li>
    <li>Принимает телефоны только в формате 5556667788 (без кода), иначе это считается ошибкой синтаксиса</li>
    <li>Принимает почты без пробелов, поэтому через пробел ожидается следующее слово</li>
    <li>Принимает произвольное количество почт и телефонов, перечисленных через <code>и</code></li>
    <li>Не добавляет ничего, если контакт не существует</li>
    <li>Не добавляет почту/телефон, если такая почта/телефон уже есть у контакта</li>
    </ul>
    <p><strong>Пример:</strong> <code>Добавь телефон 5556667788 и телефон 5556667787 и почту grisha@example.com для контакта Григорий;</code></p>
    <h5><code>Удали телефон &lt;телефон&gt; и почту &lt;почта&gt; для контакта &lt;имя&gt;</code></h5>
    <ul>
    <li>Удаляет <code>&lt;телефон&gt;</code> из списка телефонов и <code>&lt;почту&gt;</code> из списка почт контакта <code>&lt;имя&gt;</code></li>
    <li>Принимает телефоны только в формате 5556667788 (без кода), иначе это считается ошибкой синтаксиса</li>
    <li>Принимает почты без пробелов, иначе это считается ошибкой синтаксиса</li>
    <li>Принимает произвольное количество почт и телефонов, перечисленных через <code>и</code></li>
    <li>Не удаляет ничего, если контакт не существует</li>
    <li>Не удаляет почту/телефон, если такая почта/телефон отсутствует у контакта</li>
    </ul>
    <p><strong>Пример:</strong> <code>Удали телефон 5556667788 для контакта Григорий;</code></p>
    <h5><code>Покажи почты и телефоны для контактов, где есть &lt;запрос&gt;</code></h5>
    <ul>
    <li>Ищет вхождение <code>&lt;запрос&gt;</code> хотя бы в один из телефонов, либо в одну из почт, либо в имя контакта</li>
    <li>Принимает <code>&lt;запрос&gt;</code> содержащий любые символы, кроме <code>;</code></li>
    <li>Принимает для перечисления произвольное количество типов полей, перечисленных через <code>и</code>, среди которых могут быть <code>имя</code>, <code>почты</code> и <code>телефоны</code></li>
    <li>Возвращает список строк в формате <code>&lt;почта 1&gt;,&lt;почта 2&gt;;&lt;телефон 1&gt;</code> в соответствии с запращиваемыми полями, для подходящих под запрос контактов</li>
    <li>Возвращает контакты в порядке создания, а их почты/телефоны в порядке добавления</li>
    <li>Возвращает имена и электронные почты как есть, а телефоны в виде <code>+7 (555) 666-77-88</code></li>
    <li>Не возвращает ничего на пустой запрос (<code>Покажи имя для контактов, где есть ;</code>)</li>
    </ul>
    <p><strong>Пример:</strong> <code>Покажи имя и почты и телефоны и почты для контактов, где есть Гр;</code></p>
    <h5><code>Удали контакты, где есть &lt;запрос&gt;</code></h5>
    <ul>
    <li>Ищет вхождение <code>&lt;запрос&gt;</code> хотя бы в один из телефонов, либо в одну из почт, либо в имя контакта</li>
    <li>Принимает <code>&lt;запрос&gt;</code> содержащий любые символы, кроме <code>;</code></li>
    <li>Удаляет все подходящие контакты</li>
    <li>Не удаляет ничего на пустой запрос (<code>Удали контакты, где есть ;</code>)</li>
    </ul>
    <p><strong>Пример:</strong> <code>Удали контакты, где есть Гр;</code></p>
    <h5>Другие особенности синтаксиса</h5>
    <ul>
    <li><code>pbQL</code> регистрозависимый язык, поэтому <code>покажи</code> не является правильной командой</li>
    <li>Команды в запросе разделяются и заканчиваются <code>;</code>. <code>Создай контакт Григорий;Удали контакт Григорий;</code> – правильный запрос</li>
    <li>Каждое слово отделяется ровно одним пробелом, поэтому большое количество подряд идущих пробелов это ошибка синтаксиса</li>
    <li><code>&lt;запрос&gt;</code> не является частью языка, а является аргументом, поэтому может содержать любое количество подряд идущих пробелов</li>
    </ul>
    <h4>Ваша функция <strong>run</strong> должна</h4>
    <ul>
    <li>Принимать на вход запрос в виде строки</li>
    <li>Возвращать массив строк с ответом</li>
    <li>Конкатенировать в один массив результаты всех <code>Покажи</code></li>
    <li>Вызывать вспомогательную функцию <strong>syntaxError</strong> на первую обнаруженную ошибку синтаксиса</li>
    <li>Вызывать <strong>syntaxError</strong> c двумя аргументами – номер команды и номер символа, с которого начинается ошибка синтаксиса</li>
    <li>Считать команды и символы с единицы, а не с нуля</li>
    </ul>
    <h5>Примеры ошибок синтаксиса</h5>
    <ul>
    <li><code>покажи имя для контактов, где есть Гр;</code> – команда c маленькой буквы, ошибка с символа 1</li>
    <li><code>Покжи имя для контактов, где есть Гр;</code> – опечатка в команде, ошибка с символа 1</li>
    <li><code>Покажи  имя для контактов, где есть Гр;</code> – лишний пробел, ошибка с символа 8 (второй пробел)</li>
    <li><code>Удали телефон 55566677 для контакта Григорий;</code> – недостаточно цифр в телефоне, ошибка с символа 15 (первый символ телефона)</li>
    <li><code>Покажи имя для контактов, где есть Гр</code> – отсутствует точка с запятой, ошибка с символа 38 (отсутствующий символ в конце команды)</li>
    </ul>
</article>

<h3>Примеры:</h3>
   <pre>
const pbql = require('pbql.js');

// Пример 1
pbql.run('Покажи имя для контактов, где есть ий;')
/*
    []
*/

// Пример 2
pbql.run(
    'Создай контакт Григорий;' +
    'Создай контакт Василий;' +
    'Создай контакт Иннокентий;' +
    'Покажи имя для контактов, где есть ий;'
)
/*
    [
        'Григорий',
        'Василий',
        'Иннокентий'
    ]
*/

// Пример 3
pbql.run(
    'Создай контакт Григорий;' +
    'Создай контакт Василий;' +
    'Создай контакт Иннокентий;' +
    'Покажи имя и имя и имя для контактов, где есть ий;'
)
/*
    [
        'Григорий;Григорий;Григорий',
        'Василий;Василий;Василий',
        'Иннокентий;Иннокентий;Иннокентий'
    ]
*/

// Пример 4
pbql.run(
    'Создай контакт Григорий;' +
    'Покажи имя для контактов, где есть ий;' +
    'Покажи имя для контактов, где есть ий;'
)
/*
    [
        'Григорий',
        'Григорий'
    ]
*/

// Пример 5
pbql.run(
    'Создай контакт Григорий;' +
    'Удали контакт Григорий;' +
    'Покажи имя для контактов, где есть ий;'
)
/*
    []
*/

// Пример 6
pbql.run(
    'Создай контакт Григорий;' +
    'Добавь телефон 5556667787 для контакта Григорий;' +
    'Добавь телефон 5556667788 и почту grisha@example.com для контакта Григорий;' +
    'Покажи имя и телефоны и почты для контактов, где есть ий;'
)
/*
    [
        'Григорий;+7 (555) 666-77-87,+7 (555) 666-77-88;grisha@example.com'
    ]
*/

// Пример 7
pbql.run(
    'Создай контакт Григорий;' +
    'Добавь телефон 5556667788 для контакта Григорий;' +
    'Удали телефон 5556667788 для контакта Григорий;' +
    'Покажи имя и телефоны для контактов, где есть ий;'
)
/*
    [
        'Григорий;'
    ]
*/
</pre>
</blockquote>
